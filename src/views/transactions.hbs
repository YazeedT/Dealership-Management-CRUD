<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transactions</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
        <!-- Navbar -->
        <table width="70%">
            <tr>
                <td><a href="/">Home</a></td>
                <td><a href="cars">Cars</a></td>
                <td><a href="customers">Customers</a></td>
                <td><a href="transactions">Transactions</a></td>
                <td><a href="salespeople">Salespeople</a></td>
                <td><a href="financeCompanies">Finance Companies</a></td>
                <td><a href="features">Features</a></td>
                <td><a href="carFeatures">Car Features</a></td>
            </tr>
        </table>
        
    <!-- Display Transactions -->
    <h1 class="header">Transactions</h1>
    <table class="portfolio" id="transactions-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Sale Price</th>
                <th>Customer ID</th>
                <th>Car ID</th>
                <th>Salesperson ID</th>
                <th>Sale Date</th>
                <th>Finance Company ID</th>
                <th>Loan Amount</th>
                <th>Loan Duration</th>
                <th>Interest Rate</th>
                <th>Sale Status</th>
            </tr>
        </thead>

        <tbody>
            {{#each data}}
            <tr class="item">
                <td>{{this.Sale_id}}</td>
                <td>{{this.Sale_price}}</td>
                <td>{{this.Customer_id}}</td>
                <td>{{this.Car_id}}</td>
                <td>{{this.Salesperson_id}}</td>
                <td>{{this.Sale_date}}</td>
                <td>{{this.Finance_company_id}}</td>
                <td>{{this.Loan_amount}}</td>
                <td>{{this.Loan_duration}}</td>
                <td>{{this.Interest_rate}}</td>
                <td>{{this.Sale_status}}</td>
            </tr>
            {{/each}}
        </tbody>
    </table>

        
        
    <!-- Form for creating a Transaction -->
    <h2 class="header">Add a Transaction</h2>
    <form class="info" id="createTransactionForm" method="POST" action="/createTransaction">
        <div>
            <label for="customerId">Customer:</label>
            <select name="customerId" id="customerId" required>
                <option selected>Choose a customer</option>
                {{#each customers}}
                    <option value="{{this.Customer_id}}">{{this.Customer_fname}} {{this.Customer_lname}} - Phone: {{this.Customer_phone}}</option>
                {{/each}}
            </select>
        </div>

        <div>
            <label for="carId">Car:</label>
            <select name="carId" id="carId" required>
                <option selected>Choose a car</option>
                {{#each cars}}
                    <option value="{{this.Car_id}}">{{this.Car_make}} {{this.Car_model}} {{this.Car_year}} (ID: {{this.Car_id}})</option>
                {{/each}}
            </select>
        </div>

        <div>
            <label for="salespersonId">Salesperson:</label>
            <select name="salespersonId" id="salespersonId" required>
                <option selected>Choose a salesperson</option>
                {{#each salespeople}}
                    <option value="{{this.Salesperson_id}}">{{this.Salesperson_fname}} {{this.Salesperson_lname}} </option>
                {{/each}}
            </select>
        </div>
        <div>
            <label for="saleDate">Sale Date:</label>
            <input type="date" id="saleDate" name="saleDate" required>
        </div>

        <div>
            <label for="financeCompany">Finance Company:</label>
            <select name="financeCompany" id="financeCompany">
                <option selected>Choose a finance company</option>
                {{#each financeCompanies}}
                    <option value="{{this.Finance_company_id}}">{{this.Finance_company_name}}</option>
                {{/each}}
            </select>
        </div>

        <div>
            <label for="loanAmount">Loan Amount:</label>
            <input type="number" id="loanAmount" name="loanAmount">
        </div>

        <div>
            <label for="loanDuration">Loan Duration:</label>
            <input type="number" id="loanDuration" name="loanDuration">
        </div>

        <div>
            <label for="interestRate">Interest Rate:</label>
            <input type="number" step="0.001" id="interestRate" name="interestRate">
        </div>

        <div>
            <label for="saleStatus">Sale Status:</label>
            <select id="saleStatus" name="saleStatus" required>
                <option selected>Choose sale status</option>
                <option value="1">Pending</option>
                <option value="2">Completed</option>
                <option value="3">Canceled</option>
            </select>
        </div>
        
        <div>
            <button type="submit">Create</button>
        </div>
    </form>

    <!-- Form for updating a Transaction -->
    <h2 class="header">Update a Transaction</h2>
    <form class="info" id="updateTransactionForm" method="POST" action="/updateTransaction">
        <div>
            <label for="transactionID">Select a Transaction:</label>
            <select name="transactionID" id="transactionID">
                <option selected>Choose a transaction</option>
                {{#each data}}
                    <option value="{{this.Sale_id}}"> ID: {{this.Sale_id}} - Sale: ${{this.Sale_price}}</option>
                {{/each}}
            </select>
        </div>

        <div>
            <label for="updateSalePrice">Sale Price:</label>
            <input type="number" id="updateSalePrice" name="salePrice" required>
        </div>

        <div>
            <label for="updateCustomerId">Customer ID:</label>
            <select name="customerId" id="updateCustomerId" required>
                <option selected>Choose a customer</option>
                {{#each customers}}
                    <option value="{{this.Customer_id}}">{{this.Customer_fname}} {{this.Customer_lname}} - Phone: {{this.Customer_phone}}</option>
                {{/each}}
            </select>        
        </div>

        <div>
            <label for="updateCarId">Car ID:</label>
            <select name="carId" id="updateCarId" required>
                <option selected>Choose a car</option>
                {{#each cars}}
                    <option value="{{this.Car_id}}">{{this.Car_make}} {{this.Car_model}} {{this.Car_year}} (ID: {{this.Car_id}})</option>
                {{/each}}
            </select>        
        </div>

        <div>
            <label for="updateSalespersonId">Salesperson ID:</label>
            <select name="salespersonId" id="updateSalespersonId" required>
                <option selected>Choose a salesperson</option>
                {{#each salespeople}}
                    <option value="{{this.Salesperson_id}}">{{this.Salesperson_fname}} {{this.Salesperson_lname}} </option>
                {{/each}}
            </select>        
        </div>

        <div>
            <label for="updateSaleDate">Sale Date:</label>
            <input type="date" id="updateSaleDate" name="saleDate" required>
        </div>

        <div>
            <label for="updateFinanceCompany">Finance Company:</label>
            <select name="financeCompany" id="updateFinanceCompany">
                <option selected>Choose a finance company</option>
                {{#each financeCompanies}}
                    <option value="{{this.Finance_company_id}}">{{this.Finance_company_name}}</option>
                {{/each}}
            </select>        
        </div>

        <div>
            <label for="updateLoanAmount">Loan Amount:</label>
            <input type="number" id="updateLoanAmount" name="loanAmount">
        </div>

        <div>
            <label for="updateLoanDuration">Loan Duration:</label>
            <input type="number" id="updateLoanDuration" name="loanDuration">
        </div>

        <div>
            <label for="updateInterestRate">Interest Rate:</label>
            <input type="number" step="0.001" id="updateInterestRate" name="interestRate">
        </div>

        <div>
            <label for="updateSaleStatus">Sale Status:</label>
            <select id="updateSaleStatus" name="saleStatus" required>
                <option selected>Choose sale status</option>
                <option value="1">Pending</option>
                <option value="2">Completed</option>
                <option value="3">Canceled</option>
            </select>
        </div>

        <div>
            <button type="submit">Update</button>
        </div>
    </form>


    <!-- Form for deleting a Transaction -->
    <h2 class="header">Delete a Transaction</h2>
    <form class="info" id="deleteTransactionForm" method="POST" action="/deleteTransaction">
        <div>
            <label for="transactionID">Select a Transaction:</label>
            <select name="transactionID" id="deleteTransactionSelect">
                <option selected>Choose a transaction</option>
                    {{#each data}}
                    <option value="{{this.Sale_id}}"> ID: {{this.Sale_id}} - Sale: ${{this.Sale_price}}</option>
                    {{/each}}
            </select>
        </div>
        
        <div>
            <button type="submit">Delete</button>
        </div>
    </form>
    <script src="/js/transactions-form.js"></script>
</body>
</html>